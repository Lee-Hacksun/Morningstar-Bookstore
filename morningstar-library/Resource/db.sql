drop database if exists morningstar_bookstore;
create database morningstar_bookstore;

use morningstar_bookstore;

drop table if exists book;
create table book(
   ISBN varchar(15),
   bookName varchar(50),
   author varchar(20),
   publisher varchar(20),
   releaseDate date,
   description varchar(500),
   page int,
   bookImg text,
   category int,
   primary key(ISBN)
);

drop table if exists inventory;
create table inventory(
   ISBN varchar(15),
   inventory int,
   salesVolume int,
   price int,
   primary key(ISBN)
);

drop table if exists user;
create table user(
   userID varchar(10),
   userPW varchar(20),
   name varchar(10),
   managerMod boolean,
   email varchar(50),
   deliveryAddress varchar(150),
   primary key(userID)
);

drop table if exists sale;
create table sale(
   orderID int,
   userID varchar(10),
   orderDate date,
   deliveryAddress varchar(150),
   totalAmount int,
   primary key(orderID)
);

drop table if exists orderList;
create table orderList(
   orderID int,
   ISBN varchar(15),
   count int
);

drop table if exists review;
create table review(
   userID varchar(10),
   ISBN varchar(15),
   rating int,
   content varchar(250),
   primary key(userID, ISBN)
);

drop table if exists cart;
create table cart(
   userID varchar(10),
   ISBN varchar(15),
   bookCount int
);

drop table if exists orderHistory;
create table orderHistory(
   orderID int,
   orderDate date,
   primary key (orderID),
   FOREIGN KEY (orderID) REFERENCES sale(orderID)
);

drop table if exists managerOrder;
create table managerOrder(
   userID varchar(10),
   managerOrderID int,
   orderDate date,
   primary key (managerOrderID)
);

drop table if exists bookOfManagerOrder;
create table bookOfManagerOrder(
   managerOrderID int,
   ISBN varchar(15),
   primary key (managerOrderID)
);


insert into book
values ('9788937462788', '노인과 바다', '어니스트 헤밍웨이', '믿음사', '2012-01-02', '미국 현대 문학의 개척자라 불리는 어니스트 헤밍웨이의 대표작 『노인과 바다』. 퓰리처상 수상작이자 헤밍웨이의 마지막 소설로, 작가 고유의 소설 수법과 실존 철학이 집약된 헤밍웨이 문학의 결정판이다. 한 노인의 실존적 투쟁과 불굴의 의지를 절제된 문장으로 강렬하게 그려냈다. 십여 년 동안 이렇다 할 작품을 내놓지 못했던 헤밍웨이는 이 작품을 통해 작가적 생명력을 재확인하고 삶을 긍정하는 성숙한 태도를 보여주었다. 개인주의와 허무주의를 넘어 인간과 자연을 긍정하고 진정한 연대의 가치를 역설한다. 감정을 절제한 문체와 사실주의 기법, 다양한 상징과 전지적 화법을 활용하여 작품의 깊이를 더했다.', 193, 'https://contents.kyobobook.co.kr/sih/fit-in/458x0/pdt/9788937462788.jpg', 2);
insert into book
values ('9788937460449', '데미안', '헤르만 헤세', '믿음사', '2009-01-20', '현실에 대결하는 영혼의 발전을 담은 헤르만 헤세의 걸작 『데미안』. 독일 문학의 거장이자 노벨문학상 수상작가 헤르만 헤세의 자전적 소설이다. 1차 세계대전 직후인 1919년 에밀 싱클레어라는 가명으로 발표했던 작품으로, 열 살 소년이 스무 살 청년이 되기까지 고독하고 힘든 성장의 과정을 그리고 있다. 불안과 좌절에 사로잡힌 청춘의 내면을 다룬 이 작품은 지금까지 수많은 청년세대의 마음에 깊은 울림을 전하고 있다.', 240, 'https://contents.kyobobook.co.kr/sih/fit-in/458x0/pdt/9788937460449.jpg', 2);
insert into book
values ('9788971904398', '샌드위치 어떻게 조립해야 하나', 'Nagata Yui', '그린쿡', '2014-02-10', '정통 샌드위치에는 ‘보편적인 맛’이 있다 모든 음식에는 오래전부터 내려온 정통 요리가 있다. 왜 정통요리는 시대와 문화를 초월하여 지속적인 사랑을 받아왔을까? 그 이유는 ‘보편적인 맛’ 때문이다. 전세계에서 사랑받는 정통 샌드위치에는 샌드위치 만들기의 기본이 응축되어 있다. 맛있는 샌드위치를 만들기 위해서는 이러한 정통 샌드위치를 분석하고, 그 보편적인 맛의 조립규칙을 이해하는 것이 중요하다. 이 책에서는 샌드위치의 원조 영국을 비롯하여 프랑스, 미국, 독일, 이탈리아 등 7개국과 북유럽, 중동 등 2개 지역에서 25가지 샌드위치 메뉴를 골라 그 유래와 만드는 포인트, 응용 테크닉까지 자세히 알려준다. 또한, 정통 레시피를 바탕으로 계절별로 응용한 샌드위치를 주제에 따라 많은 종류를 충실하게 담아 설명하였고, 기본 테크닉과 재료에 대한 정보 등 전문적인 지식도 알차게 들어있다.', 240, 'https://contents.kyobobook.co.kr/sih/fit-in/458x0/pdt/9788971904398.jpg', 4);
insert into book
values ('9788932916804', '돈키호테 1', '세르반테스', '열린책들', '2014-11-15', '미겔 데 세르반테스 사아베드라의 소설 『돈키호테』 제1권. 기사 소설에 탐닉하다가 정신을 잃어 기사가 되겠다고 나선 한 엄숙한 미치광이의 이야기를 그린 이 작품은 성서 다음으로 지구상에서 가장 다양한 언어로 번역된 책이기도 합니다. 이번 한국어판은 고려대학교 스페인어문학과 안영옥 교수가 5년의 고증과 스페인에서의 답사를 걸쳐 번역한 것인데요. 마드리드 대학의 교수부터 스페인의 노인들에게까지 묻고 다니며 책에 나오는 구어체 표현이나 현재는 사용되지 않는 어휘들, 역사적이고 문화적인 배경이 포함된 이야기들을 제대로 옮겨냈습니다.', 784, 'https://contents.kyobobook.co.kr/sih/fit-in/458x0/pdt/9788932916804.jpg', 4);
insert into book
values ('9788932916811', '돈키호테 2', '세르반테스', '열린책들', '2014-11-15', '미겔 데 세르반테스 사아베드라의 소설 『돈키호테』 제2권. 기사 소설에 탐닉하다가 정신을 잃어 기사가 되겠다고 나선 한 엄숙한 미치광이의 이야기를 그린 이 작품은 성서 다음으로 지구상에서 가장 다양한 언어로 번역된 책이기도 합니다. 이번 한국어판은 고려대학교 스페인어문학과 안영옥 교수가 5년의 고증과 스페인에서의 답사를 걸쳐 번역한 것인데요. 마드리드 대학의 교수부터 스페인의 노인들에게까지 묻고 다니며 책에 나오는 구어체 표현이나 현재는 사용되지 않는 어휘들, 역사적이고 문화적인 배경이 포함된 이야기들을 제대로 옮겨냈습니다.', 936, 'https://contents.kyobobook.co.kr/sih/fit-in/458x0/pdt/9788932916811.jpg', 4);

insert into inventory
values ('9788937462788', 50, 14, 7200);
insert into inventory
values ('9788937460449', 30, 5, 7200);
insert into inventory
values ('9788971904398', 100, 30, 14400);
insert into inventory
values ('9788932916804', 50, 10, 16600);
insert into inventory
values ('9788932916811', 45, 5, 16600);

 -- 권한에대한 값: 0 회원, 1 관리자
insert into user
values ('hanshin', '123', '김한신', 0, 'hanshin@naver.com', '안산');
insert into user
values ('user123', 'password', '김유저', 0, 'user123@gmail.com', '경기도');
insert into user
values ('db123', 'db123', '김디비', 0, 'db123@gmail.com', '서울');
insert into user
values ('hello', 'q1w2e3r4', '아무개', 1, 'hello@naver.com', '서울');
insert into user
values ('com', 'asd', '이컴공', 1, 'com@hs.ac.kr', '강원도');

insert into sale
values (24042401, 'hanshin', '2024-04-24', '서울특별시 종로구 청와대로 1', 14400);
insert into sale
values (24050101, 'hanshin', '2024-05-01', '서울특별시 종로구 청와대로 1', 28800);
insert into sale
values (24050301, 'user123', '2024-05-03', '서울특별시 영등포구 의사당대로 1', 7200);
insert into sale
values (24050302, 'user123', '2024-05-03', '서울특별시 영등포구 의사당대로 1', 16600);
insert into sale
values (24050401, 'db123', '2024-05-04', '서울특별시 서초구 반포대로 201', 7200);

insert into orderList
values (24042401, '9788937462788', 1);
insert into orderList
values (24042401, '9788937460449', 1);
insert into orderList
values (24050101, '9788937462788', 1);
insert into orderList
values (24050101, '9788971904398', 2);
insert into orderList
values (24050301, '9788937460449', 1);
insert into orderList
values (24050302, '9788932916804', 1);
insert into orderList
values (24050401, '9788937460449', 1);

 -- rating은 0부터 10 사이의 정수값
insert into review
values ('hanshin', '9788937462788', 8, '티비에서 많이 언급되길래 구입했는데 아주 재미있어요');
insert into review
values ('hanshin', '9788937460449', 10, '과거로 돌아간다면 난 어느 시점으로 돌아가고 싶을까 철부지 20대 시절 그 빛나던 시절에 난 무엇을 했던가 생각없이 방황하던 그 시간들이 이제와 돌이켜보면 너무 안타깝다. 지금 이 시간도 언젠가 또 그렇게 느껴지겠지...');
insert into review
values ('user123', '9788971904398', 9, '샌드위치에 대한 모든것. 단순히 샌드위치를 만드는 방법이 아닌 응용법을 알려주는 책이다.');
insert into review
values ('db123', '9788932916804', 8, '책을 곰곰히 읽어볼수록.. 우리가 이름으로만 알던 돈키호테는 그냥 이름과 이미지였을 뿐. 돈키호테를 중심으로한 세르반테스의 세계는 훨씬 크고 넓음.');
insert into review
values ('user1','9788932916804', 4, '진짜 크고 무겁고 두꺼워요 이걸로 사람 정수리 내려찍으면 기절시킬수 있을것 같아요');

insert into cart
values ('hanshin', '9788937462788', 2);
insert into cart
values ('hanshin', '9788937460449', 1);
insert into cart
values ('hanshin', '9788971904398', 4);
insert into cart
values ('db123', '9788932916804', 3);
insert into cart
values ('user123', '9788932916811', 1);

insert into orderHistory
values (24042401, '2024-04-24');
insert into orderHistory
values (24050101, '2024-05-01');
insert into orderHistory
values (24050301, '2024-05-03');
insert into orderHistory
values (24050302, '2024-05-03');
insert into orderHistory
values (24050401, '2024-05-04');

insert into managerOrder
values ('com', 24042801, '2024-04-28');
insert into managerOrder
values ('com', 24020202, '2024-02-02');
insert into managerOrder
values ('hello', 24040202, '2024-04-02');
insert into managerOrder
values ('hello', 24040301, '2024-04-03');
insert into managerOrder
values ('hello', 240401501, '2024-04-15');

insert into bookOfManagerOrder
values (24042801, '9788964620786');
insert into bookOfManagerOrder
values (24042802, '9788982734014');
insert into bookOfManagerOrder
values (24020202, '9788937460449');
insert into bookOfManagerOrder
values (24040202, '9788971904398');
insert into bookOfManagerOrder
values (24040301, '9788937460449');
insert into bookOfManagerOrder
values (240401501, '9788982734014');